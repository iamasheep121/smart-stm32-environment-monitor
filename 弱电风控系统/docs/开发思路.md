1. 定义状态枚举：明确系统有哪些状态
2. 状态行为映射：每个状态对应什么行为  
3. 实现具体行为：编写状态对应的具体代码
4. 状态转换逻辑：状态之间如何切换



其实我的总思路就是，比如模式切换，先定义一个枚举，包含四种模式，分别为**自动模式，手动模式，平台模式和设置模式**。然后定义四个函数mode_Handler用switch-case根据模式枚举值处理不同逻辑。比如串口打印，OLED显示，数据读取，按键控制等等。

* **按键处理**：有四个按键，为**模式切换键，上调，下调，确认**。默认**上拉输入**，按下为低电平，如果某个按键按下触发对应键值获取函数

* **OLED显示**：按照不同模式显示不同的页面，就四个模式页面显示，再实时更新**SystemState_t**的结构体传感器数据值，就是温湿度状态等等这些

* **网络设置**：用stm32发送**AT指令**给esp8266-01s，让其接入网络，通过**MQTT协议**，发布和订阅主题。微信小程序通过http协议和**onenet云平台**通信，实现页面交互。微信小程序可以控制蜂鸣器和电机开关，云平台可以控制单片机**风机速度开关，速度调节，LED开关**。

* **电机控制**：采用pwm波形，通过更改**占空比**的值改变电机的速度

* **数据采集**：采用**mq2**和**mq7**气敏传感器和一氧化碳传感器，使用**adc转换＋dma**运输数据，**sht30**负责采集温湿度数据，使用I2C协议
